<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Michael Enterprise | <%= title %></title>
  <!-- Favicon icon -->
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/fav1.png">
  <!-- toastr -->
  <link rel="stylesheet" href="/assets/plugins/toastr/toastr.min.css">
  <!-- Custom Stylesheet -->
  <link rel="stylesheet" href="/assets/css/styleExchange.css">
</head>

<body>
  <div id="preloader">

    <!-- <div class="sk-three-bounce">
      <div class="sk-child sk-bounce1"></div>
      <div class="sk-child sk-bounce2"></div>
      <div class="sk-child sk-bounce3"></div>
    </div> -->
  </div>

  <div class="main-wrapper">
    <!--===================== Sidebar Start =====================-->
    <section class="sidebar">
      <nav class="navbar navbar-expand-lg navbar-light flex-nowrap flex-column justify-content-between align-items-start p-0">
        <div class="mb-lg-5 w-100">
          <div class="d-none d-lg-block">
            <a class="navbar-brand d-flex align-items-start mb-5" href="/">
              <img style="width: 150px; height: auto;" src="/assets/images/logo-01.png" alt="" class="mb-2">
              <!-- <span class="fw-bold ms-2">Treemium</span> -->
            </a>
          </div>
          <div class="collapse navbar-collapse collapse show" id="navbarNavAltMarkup">
            <ul class="navbar-nav flex-row flex-lg-column justify-content-between align-items-center align-items-lg-start">
              <li>
                <a class="nav-link d-flex align-items-center active" href="/exchange/index" data-tooltip="home" data-placement="top">
                  <i class="mdi mdi-home-circle"></i>
                  <div class="nav-text d-none d-md-block">Home</div>
                </a>
              </li>
              <li>
                <a class="nav-link d-flex align-items-center @@buy-sell" href="/exchange/money-exchange" data-tooltip="exchange" data-placement="top">
                  <i class="mdi mdi-repeat"></i>
                  <div class="nav-text d-none d-md-block">exchange</div>
                </a>
              </li>
              <li>
                <a class="nav-link d-flex align-items-center @@accounts" href="/exchange/history" data-tooltip="history" data-placement="top">
                  <i class="mdi mdi-clock-outline"></i>
                  <div class="nav-text d-none d-md-block">History</div>
                </a>
              </li>
              <li>
                <a class="nav-link d-flex align-items-center @@settings" href="/exchange/beneficiaries" data-tooltip="beneficiary" data-placement="top">
                  <i class="mdi mdi-account-multiple"></i>
                  <div class="nav-text d-none d-md-block">Beneficiary</div>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="d-none d-lg-block w-100 pb-5">
          <div class="social_icon ms-0 ps-0 mb-2">
            <a target="_blank" href="https://www.instagram.com/michael_enterprise?igsh=d3EzMTAyZ3VpZHdl"><i class="fab fa-instagram"></i></a>
            <a target="_blank" href="#"><i class="fab fa-facebook-f"></i></a>
            <a target="_blank" href=" https://vk.com/club227320115"><i class="fab fa-vk"></i></a>
            <a target="_blank" href="https://wa.me/+79954459255"><i class="fab fa-whatsapp"></i></a>
            <a target="_blank" href="https://t.me/micenterprise"><i class="fab fa-telegram"></i></a>
          </div>
          <div class="copyright">
            <p>&copy;
              2024
              <a href="https://michael-enetprise.com" target="_blank">Michael Enterprise</a>
            </p>
          </div>
        </div>
      </nav>
    </section>
    <!--===================== Sidebar End =====================-->
    <section class="ms-lg-240 px-lg-4 px-xl-0 mb-100 mb-lg-0">
      <!--===================== Navigation Start =====================-->
      <div class="navigation-2 d-flex sticky-top px-lg-4 px-xl-0">
        <div class="container">
          <div class="row">
            <div class="col-12 d-flex justify-content-between align-items-center">
              <div class="d-block d-lg-none">
                <a class="navbar-brand d-flex align-items-start" href="/">
                  <img style="width: 100px; height: auto;" src="/assets/images/logo-01.png" alt="" class="mb-2">
                </a>
              </div>
              <div class="search-form">

              </div>
              <!-- search form end -->

              <% if(!user){ %>
              <div class="d-flex align-items-center">
                <div class="dropdown text-center text-sm-start">
                  <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown">
                    <span class="user-icon rounded-circle text-white"><i class="mdi mdi-account"></i></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-light w-100 box-shadow border-0 p-0 mt-2 rounded" aria-labelledby="dropdownMenuButton2">
                    <li><a class="dropdown-item" href="/sign-in">Sign In</a></li>
                    <li><a class="dropdown-item" href="/register">Sign Up</a></li>
                  </ul>
                </div>
              </div>
              <% }else{ %>
              <div class="d-flex align-items-center">
                <div class="dropdown text-center text-sm-start">
                  <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown">
                    <span class="user-icon rounded-circle text-white"><i class="mdi mdi-account"></i></span>
                    <span class="user-name fw-medium ms-2 d-none d-sm-inline-block"><%= user.firstName %> <%= user.lastName %></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-light w-100 box-shadow border-0 p-0 mt-2 rounded" aria-labelledby="dropdownMenuButton2">
                    <li><a class="dropdown-item" href="/exchange/account"><i class="mdi mdi-account"></i>account</a></li>
                    <li><a class="dropdown-item" href="/exchange/history"><i class="la la-book"></i>history</a></li>
                    <li><a class="dropdown-item logout signOut-user-btn" style="cursor: pointer;"><i class="mdi mdi-logout"></i>logout</a></li>
                  </ul>
                </div>
                <!-- dropdown end -->
              </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
      <!--===================== Navigation End =====================-->

      <!--===================== Content body Start =====================-->
      <div class="content-body">
        <!--===================== Page title Start =====================-->
        <div class="page_title">
          <div class="container">
            <div class="row">
              <div class="col-12">
                <div class="page_title-content">
                  <!-- <p>Welcome Back,<span> Carla Pascle</span></p> -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--===================== Page title End =====================-->
        <div class="container">

          <p style="text-align: center; font-size: 30px; font-weight: bolder; color: black;">Welcome to <span style="color: #9b250b;">Michael Exchange</span></p>


          <p style="text-align: center;">where fast, reliable currency exchange and competitive rates meet your global financial needs.</p>

          <div style="height: 40px;"></div>

          <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-12">
              <div class="card">
                <div class="card-body">
                  <div class="buy-sell-widget">

                    <div class="tab-content tab-content-default">
                      <div class="tab-pane fade show active" id="buy" role="tabpanel">
                        <form name="myform" class="currency_validate">
                          <div style="height: 40px;"></div>
                          <p style="text-align: center; font-weight: bolder; font-size: larger; color: black;">Check Rates</p>
                          <div class="form-group">
                            <label class="me-sm-2">Send</label>
                            <div class="input-group mb-3">
                              <div style="display: flex; align-items: center; border: 1px solid #ced4da; border-radius: 4px; overflow: hidden; width: 100%;">
                                <select id="base-currency" class="form-select" name="currency" style="flex: 0.5; border: none; padding: 0 10px; height: 40px; outline: none; box-shadow: none; appearance: none; background-color: white;">
                                  <% currencies.forEach(currency => { %>
                                  <option value="<%= currency.code %>"><%= currency.code %></option>
                                  <% }); %>
                                </select>
                                <input id="base-amount" type="number" class="form-control" name="amount" placeholder="Enter amount" style="flex: 2.5; border: none; padding: 0 10px; height: 40px; outline: none; box-shadow: none;" oninput="updateTargetAmount()">
                              </div>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="me-sm-2">Receive</label>
                            <div class="input-group mb-3">
                              <div style="display: flex; align-items: center; border: 1px solid #ced4da; border-radius: 4px; overflow: hidden; width: 100%;">
                                <select id="target-currency" class="form-select" name="currency" style="flex: 0.5; border: none; padding: 0 10px; height: 40px; outline: none; box-shadow: none; appearance: none; background-color: white;">
                                  <% currencies.slice(1).forEach(currency => { %>
                                  <option value="<%= currency.code %>"><%= currency.code %></option>
                                  <% }); %>
                                  <!-- Adding the first currency last -->
                                  <option value="<%= currencies[0].code %>"><%= currencies[0].code %></option>
                                </select>
                                <input id="target-amount" type="number" class="form-control" name="amount" placeholder="Amount to receive" style="flex: 2.5; border: none; padding: 0 10px; height: 40px; outline: none; box-shadow: none;" disabled>
                              </div>
                            </div>
                          </div>

                          <!-- Display the exchange rate here -->
                          <p style="text-align: center;">Rate: <span id="exchange-rate-visible">0</span></p>
                          <p style="text-align: center; display: none;">Rate: <span id="exchange-rate">0</span></p>

                          <a href="/exchange/money-exchange" style="background-color: #5F1303; border-color: #5F1303;" class="btn btn-success w-100">Get Started</a>
                          <div style="height: 40px;"></div>
                        </form>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>



          <div style="height: 30px;"></div>
          <p style="font-size: 25px; font-weight: bolder; color: black; text-align: center;">How it works</p>
          <div style="height: 30px;"></div>
          <div class="row">
            <div class="col-xl-12">
              <div class="row">
                <div class="col-xl-4 col-lg-6 col-md-6">
                  <div class="widget-card">

                    <p style="color: black; font-weight: bolder;">Setup your account</p>
                    <ul>
                      <li>
                        Register an account with Michael Enterprise and login your account
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6">
                  <div class="widget-card">

                    <p style="color: black; font-weight: bolder;">Enter recipient details</p>
                    <ul>
                      <li>
                        Select sender and recipient currency, enter amount and receiver's account details
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6">
                  <div class="widget-card">
                    <!-- <div class="widget-title">
                      <h5>Balance</h5>
                      <p class="text-success">133% <span><i class="las la-arrow-up"></i></span></p>
                    </div>
                    <div class="widget-info">
                      <h3>$18,235.0</h3>
                      <p>USD</p>
                    </div> -->
                    <p style="color: black; font-weight: bolder;">Complete transaction</p>
                    <ul>
                      <li>
                        Send the exact amount entered to the provided account details, upload payment proof
                        and click the button to complete the transaction. The receiver will be credited once the transaction is confirmed.
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

            </div>
            <div style="height: 20px;"></div>
            <p style="font-size: 25px; font-weight: bolder; color: black; text-align: center;">FAQ Section</p>
            <div style="height: 20px;"></div>
            <div class="row">
              <div class="col-12 col-xl-12">
                <div class="card accordion border-0 rounded-default mb-4 mb-xl-0" id="accordion-faq">
                  <h5 class="card-title px-4 py-3">FAQ</h5>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent text-dark-200" id="headingOne" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">How can I create an account on your website?</h6>
                    <div id="collapseOne" class="accordion-collapse border-0 collapse show" aria-labelledby="headingOne" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">To create an account, click the "Sign Up" button on the homepage. Fill in your personal details, create a password, and verify your email address. Once your email is verified, your account will be ready to use.</p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent collapsed text-dark-200" id="headingTwo" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">How long does it take for transactions to be completed?</h6>
                    <div id="collapseTwo" class="accordion-collapse border-0 collapse" aria-labelledby="headingTwo" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">Transactions are usually completed within minutes. However, some may take longer time depending on the currency and your bank’s processing times.</p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent collapsed text-dark-200" id="headingThree" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">How can I update my account information?</h6>
                    <div id="collapseThree" class="accordion-collapse border-0 collapse" aria-labelledby="headingThree" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">To update your account information, log in to your account, go to the "Profile" section, and make the necessary changes. You can update your personal details and change your password.</p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent collapsed text-dark-200" id="headingFour" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Is it safe to use your website for currency exchanges?</h6>
                    <div id="collapseFour" class="accordion-collapse border-0 collapse" aria-labelledby="headingFour" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">AYes, our website is safe and secure. We use advanced encryption and security protocols to protect your data and transactions. We comply with industry regulations to ensure your safety.</p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent collapsed text-dark-200" id="headingFive" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">What currencies do you support?</h6>
                    <div id="collapseFive" class="accordion-collapse border-0 collapse" aria-labelledby="headingFive" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">We support a wide range of currencies, The list of supported currencies can be updated anytime, so please check the homepage for the most current information.</p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item px-4 py-3">
                    <h6 class="accordion-button p-0 border-0 background-transparent collapsed text-dark-200" id="headingSix" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">What currencies do you support?</h6>
                    <div id="collapseSix" class="accordion-collapse border-0 collapse" aria-labelledby="headingFive" data-bs-parent="#accordion-faq">
                      <div class="accordion-body p-0">
                        <p class="fs-6 mt-4">We support a wide range of currencies, The list of supported currencies can be updated anytime, so please check the homepage for the most current information.</p>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- card end -->
              </div>
              <div style="height: 30px;"></div>
            </div>

            <div style="height: 20px;"></div>
            <p style="font-size: 25px; font-weight: bolder; color: black; text-align: center;">Contact Us</p>
            <div style="height: 20px;"></div>

            <div class="row">
              <div class="col-12 col-xl-6">
                <div style="display: flex; justify-content: center; margin: 40px;">
                  <img src="/assets/images/contact-info-img.png" alt="">
                </div>

              </div>
              <div class="col-12 col-xl-6">
                <div class="card accordion border-0 rounded-default mb-4 mb-xl-0" id="accordion-faq">
                  <form style="padding: 60px 30px ;" class="currency_validate">
                    <label for="email" class="form-la">Email</label>
                    <input type="email" class="form-control" placeholder="Enter email address" id="email" required>
                    <p></p>
                    <label for="subject" class="form-la">Subject</label>
                    <input type="text" class="form-control" placeholder="Enter subject" id="subject" required>
                    <p></p>
                    <label for="message" class="form-la">Email</label>
                    <textarea id="message" placeholder="Enter message" class="form-control" required></textarea>
                    <p></p>
                    <button type="submit" name="submit" class="btn btn-success w-100" style="background-color: #9b250b;">Send message</button>
                  </form>
                  <!-- card end -->
                </div>
                <div style="height: 30px;"></div>

              </div>



            </div>
          </div>
        </div>
        <!--===================== Content body End =====================-->
    </section>
  </div>

  <!-- Modal HTML -->
<div id="myModal-1" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog bg_image">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-bs-dismiss="modal"><i class="fa-light fa-x"></i></button>
      </div>
      <span style="font-size: larger; text-align: right; color: white; margin-right: 20px; margin-bottom: 10px;">X</span>
      <!-- <div class="modal-body text-center">
        <div class="inner-content">
          <div class="content">
            <span class="pre-title">Get up to 10% discount on your purchase till 31st of August</span>
            <h1 class="title">Afro-Shop Relaunch with<br> Michael Enterprise</h1>
            <p class="disc">
              We have prepared special discounts for you on grocery products. Don't <br> miss these opportunities...
            </p>
            <div class="rts-btn-banner-area">
              <a href="/afro-shop" class="rts-btn btn-primary radious-sm with-icon">
                <div class="btn-text">
                  Shop Now
                </div>
                <div class="arrow-icon">
                  <i class="fa-light fa-arrow-right"></i>
                </div>
                <div class="arrow-icon">
                  <i class="fa-light fa-arrow-right"></i>
                </div>
              </a>
              <div class="price-area">
                <span>from</span>
                <h3 class="title animated fadeIn">$80.99</h3>
              </div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
</div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const baseCurrencySelect = document.getElementById('base-currency');
      const targetCurrencySelect = document.getElementById('target-currency');
      const baseAmountInput = document.getElementById('base-amount');
      const targetAmountInput = document.getElementById('target-amount');
      const exchangeRateDisplay = document.getElementById('exchange-rate');
      const exchangeRateVisible = document.getElementById('exchange-rate-visible');

      let exchangeRate = 0; // Initialize exchange rate
      let visibleRate = 0; // Initialize visible rate

      async function fetchExchangeRate(baseCurrency, targetCurrency) {
        try {
          const response = await fetch(`/api/v1/rates/get-rate?base=${baseCurrency}&target=${targetCurrency}`);
          if (response.ok) {
            const data = await response.json();
            if (data.status === 'success') {
              exchangeRate = data.rate ? data.rate : 0;
              visibleRate = data.visibleRate ? data.visibleRate : 0;
              exchangeRateDisplay.textContent = exchangeRate ? exchangeRate : 'Rate not found';
              exchangeRateVisible.textContent = visibleRate ? visibleRate : 'Rate not found';
              updateTargetAmount(); // Update target amount based on the new rate
            } else {
              exchangeRateDisplay.textContent = 'Error fetching rate';
            }
          } else {
            exchangeRateDisplay.textContent = 'Error fetching rate';
          }
        } catch (error) {
          exchangeRateDisplay.textContent = 'Error fetching rate';
          console.error('Error:', error);
        }
      }

      function updateTargetAmount() {
        const baseAmount = parseFloat(baseAmountInput.value) || 0;
        const targetAmount = baseAmount * exchangeRate;
        targetAmountInput.value = targetAmount.toFixed(2); // Update target amount with 2 decimal places
      }

      baseCurrencySelect.addEventListener('change', () => {
        const baseCurrency = baseCurrencySelect.value;
        const targetCurrency = targetCurrencySelect.value;
        fetchExchangeRate(baseCurrency, targetCurrency);
      });

      targetCurrencySelect.addEventListener('change', () => {
        const baseCurrency = baseCurrencySelect.value;
        const targetCurrency = targetCurrencySelect.value;
        fetchExchangeRate(baseCurrency, targetCurrency);
      });

      baseAmountInput.addEventListener('input', updateTargetAmount);

      const initialBaseCurrency = baseCurrencySelect.value;
      const initialTargetCurrency = targetCurrencySelect.value;
      fetchExchangeRate(initialBaseCurrency, initialTargetCurrency);
    });
  </script>



  <%- include('partials/exchangeFooter.ejs') %>